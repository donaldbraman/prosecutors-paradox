let e,t;const r=document.getElementById("white_rate"),o=document.getElementById("black_rate"),a=document.getElementById("avg_first"),l=document.getElementById("avg_second"),i=document.getElementById("avg_third"),n=document.getElementById("run_simulation"),s=document.getElementById("white_grid"),d=document.getElementById("black_grid"),c=document.getElementById("single_sim_chart"),u=document.getElementById("multiple_sims_chart"),p=c.getContext("2d"),f=u.getContext("2d"),m=document.querySelectorAll(".tab-button"),g=document.querySelectorAll(".tab-panel");let h=[],b=[];function v(){let e=!0;return[r,o,a,l,i].forEach(t=>{let r=parseFloat(t.value),o=t.closest(".input-wrapper");o.classList.remove("error"),o.removeAttribute("data-error"),t.id.includes("rate")?isNaN(r)?(o.classList.add("error"),o.setAttribute("data-error","Please enter a valid number"),e=!1):(r<0||r>100)&&(o.classList.add("error"),o.setAttribute("data-error","Must be between 0-100%"),e=!1):isNaN(r)?(o.classList.add("error"),o.setAttribute("data-error","Please enter a valid number"),e=!1):(r<0||r>10)&&(o.classList.add("error"),o.setAttribute("data-error","Must be between 0-10 years"),e=!1)}),e}function y(){h=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()})),b=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()}))}function B(e,t,r){e.innerHTML="",t.forEach(t=>{if(t.arrests>0){let o=document.createElement("div");o.className=`dot ${r?"white-dot":"black-dot"}`;let a=8+(t.arrests-1)*4;o.style.width=`${a}px`,o.style.height=`${a}px`,o.style.left=`${100*t.x}%`,o.style.top=`${100*t.y}%`,e.appendChild(o)}})}function C(e,t){let r=e.filter(e=>e.sentenceRemaining<=0),o=Math.round(r.length*t);for(let e=0;e<o&&0!==r.length;e++){let e=Math.floor(Math.random()*r.length),t=r[e];t.arrests++;let o=function(e){let t=parseFloat(a.value),r=parseFloat(l.value),o=parseFloat(i.value);return 1===e?t:2===e?r:o}(t.arrests);t.sentenceRemaining=o,r.splice(e,1)}}function x(e){e.forEach(e=>{e.sentenceRemaining>0&&(e.sentenceServed++,e.sentenceRemaining--)})}function A(e){return{responsive:!0,maintainAspectRatio:!0,interaction:{intersect:!1,mode:"index"},plugins:{title:{display:!1},legend:{position:"top",align:"center",labels:{padding:20,usePointStyle:!0,pointStyle:"circle",font:{size:13,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#2c3e50",titleFont:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},bodyColor:"#34495e",bodyFont:{size:13,family:"'Arial', 'Helvetica Neue', sans-serif"},borderColor:"rgba(0,0,0,0.1)",borderWidth:1,padding:12,cornerRadius:6,displayColors:!0,boxWidth:8,boxHeight:8,callbacks:{label:e=>{let t=e.dataset,r=e.parsed.y,o=`${t.label}: ${r.toFixed(1)} years`;if(t.errorBars&&t.errorBars.plus){let r=t.errorBars.plus[e.dataIndex];r>0&&(o+=` \xb1${r.toFixed(1)}`)}return o}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cumulative Sentence Years",padding:{top:15,bottom:15},font:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"},ticks:{font:{size:12,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#34495e",padding:8},grid:{color:"rgba(0,0,0,0.05)",drawBorder:!1}},x:{title:{display:!0,text:"Simulation Year",padding:{top:15,bottom:15},font:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"},ticks:{font:{size:12,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#34495e",padding:8},grid:{color:"rgba(0,0,0,0.05)",drawBorder:!1}}}}}async function H(){if(!v()){alert("Please check input values. Arrest rates must be between 0-100%, sentences between 0-10 years.");return}n.classList.add("loading"),n.disabled=!0;try{var t,a;y();let l=parseFloat(r.value)/100,i=parseFloat(o.value)/100,n=[],c=[];for(let e=0;e<20;e++){C(h,l),C(b,i),x(h),x(b);let t=h.reduce((e,t)=>e+t.sentenceServed,0),r=b.reduce((e,t)=>e+t.sentenceServed,0);n.push(t),c.push(r),B(s,h,!0),B(d,b,!1),e%5==0&&await new Promise(e=>setTimeout(e,50))}t=n,a=c,e&&e.destroy(),e=new Chart(p,{type:"line",data:{labels:Array.from({length:20},(e,t)=>`Year ${t+1}`),datasets:[{label:"White Population",data:t,borderColor:"#1976D2",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#1976D2",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#1976D2",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1},{label:"Black Population",data:a,borderColor:"#D32F2F",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#D32F2F",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#D32F2F",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1}]},options:A("Single Simulation Results")})}finally{n.classList.remove("loading"),n.disabled=!1}}function w(e){let t=e[0].length,r=Array(t).fill(0),o=Array(t).fill(0);for(let o=0;o<t;o++)r[o]=e.reduce((e,t)=>e+t[o],0)/e.length;for(let a=0;a<t;a++){let t=e.map(e=>Math.pow(e[a]-r[a],2)).reduce((e,t)=>e+t,0)/e.length;o[a]=Math.sqrt(t)}return{means:r,stdDevs:o}}async function F(){if(!v()){alert("Please check input values. Arrest rates must be between 0-100%, sentences between 0-10 years.");return}let e=document.getElementById("run_multiple_simulations");e.classList.add("loading"),e.disabled=!0;try{let e=[],a=[];for(let t=0;t<1e3;t++){y();let l=parseFloat(r.value)/100,i=parseFloat(o.value)/100,n=[],s=[];for(let e=0;e<20;e++){C(h,l),C(b,i),x(h),x(b);let e=h.reduce((e,t)=>e+t.sentenceServed,0),t=b.reduce((e,t)=>e+t.sentenceServed,0);n.push(e),s.push(t)}e.push(n),a.push(s),t%100==0&&await new Promise(e=>setTimeout(e,0))}let l=w(e),i=w(a);!function(e,r){t&&t.destroy();let o=Array.from({length:20},(e,t)=>`Year ${t+1}`);(r.means[19]/e.means[19]).toFixed(1),t=new Chart(f,{type:"line",data:{labels:o,datasets:[{label:"White Population",data:e.means,borderColor:"#1976D2",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#1976D2",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#1976D2",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1,errorBars:{plus:e.stdDevs,minus:e.stdDevs,color:"rgba(25, 118, 210, 0.3)"}},{label:"Black Population",data:r.means,borderColor:"#D32F2F",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#D32F2F",pointBorderColor:"#fff",pointHoverBackgroundColor:"#D32F2F",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1,errorBars:{plus:r.stdDevs,minus:r.stdDevs,color:"rgba(211, 47, 47, 0.3)"}}]},options:A("Multiple Simulations Results")})}(l,i)}finally{e.classList.remove("loading"),e.disabled=!1}}m.forEach(e=>{e.addEventListener("click",()=>{var t;return t=e.dataset.tab,void(m.forEach(e=>{e.classList.toggle("active",e.dataset.tab===t)}),g.forEach(e=>{e.classList.toggle("active",e.id===`${t}-simulation`)}))})}),Chart.register({id:"ratioText",beforeDraw:(e,t,r)=>{let{ctx:o,chartArea:{left:a,top:l,right:i,bottom:n}}=e;if(!r.text)return;o.save(),o.font='16px Arial, "Helvetica Neue", sans-serif',o.fillStyle="#2c3e50",o.textAlign="left",o.textBaseline="top";let s=a+(i-a)*.05,d=l+(n-l)*.05,c=r.text.split("\n"),u=Math.max(...c.map(e=>o.measureText(e).width));o.fillStyle="rgba(255, 255, 255, 0.9)",o.fillRect(s-20,d-20,u+40,28*c.length+40),o.fillStyle="#2c3e50",c.forEach((e,t)=>{o.fillText(e,s,d+28*t)}),o.restore()}}),n.addEventListener("click",H),document.getElementById("run_multiple_simulations").addEventListener("click",F),H();
//# sourceMappingURL=index.ee247064.js.map
