<!DOCTYPE html><html><head><title>Criminal History Impact Simulation</title><style>body{color:#333;background-color:#f4f4f4;flex-direction:column;align-items:center;margin:0;padding:20px;font-family:Arial,Helvetica Neue,sans-serif;display:flex}h1{text-align:center;color:#333;margin-bottom:10px}.description{text-align:center;color:#666;max-width:800px;margin-bottom:20px;line-height:1.4}.parameters-container{background-color:#fff;border-radius:8px;flex-direction:column;justify-content:center;gap:20px;width:100%;max-width:600px;margin-bottom:20px;padding:20px;display:flex;box-shadow:0 2px 4px #0000001a}.parameter-group{flex-direction:column;gap:5px;display:flex}.parameter-group label{color:#555;font-size:.9em}.parameter-group .input-wrapper{align-items:center;gap:5px;display:flex}.parameter-group .input-wrapper span{color:#555;font-size:.9em}.parameter-group input[type=number]{border:1px solid #ccc;border-radius:4px;width:80px;padding:8px}.parameter-group .tooltip{color:#666;margin-top:2px;font-size:.8em}button{color:#fff;cursor:pointer;background-color:#2196f3;border:none;border-radius:4px;padding:10px 20px;font-weight:700;transition:background-color .2s}button:hover{background-color:#1976d2}.main-container{background-color:#fff;border-radius:8px;flex-direction:column;width:90%;max-width:800px;margin:0 auto;padding:20px;display:flex;box-shadow:0 2px 4px #0000001a}.visualization-container{flex-direction:column;justify-content:center;gap:20px;margin-bottom:40px;display:flex}.grid-container{background:#ffffff80;border-radius:12px;align-items:center;gap:25px;padding:10px;display:flex}.grid-section{flex-direction:column;align-items:center;display:flex}.grid-title{text-align:center;color:#333;margin-bottom:15px;font-size:1.1em;font-weight:700}.grid{background-color:#fff;background-image:linear-gradient(#eeeeee14 1px,#0000 1px),linear-gradient(90deg,#eeeeee14 1px,#0000 1px);background-size:10% 10%;border:1px solid #ddd;border-radius:8px;width:200px;height:200px;margin-bottom:0;position:relative;box-shadow:inset 0 0 20px #00000003}.dot{border-radius:50%;transition:all .3s;position:absolute;transform:translate(-50%,-50%)}.white-dot{background-color:#2196f3b3;border:1px solid #2196f3e6}.black-dot{background-color:#f44336b3;border:1px solid #f44336e6}.legend{background-color:#fff;border:1px solid #eee;border-radius:10px;align-self:center;min-width:100px;margin-left:30px;padding:20px 25px;box-shadow:0 2px 8px #00000005}.legend-title{text-align:center;color:#333;letter-spacing:.3px;margin-bottom:18px;font-size:.95em;font-weight:600}.legend-item{color:#444;align-items:center;margin-bottom:14px;padding:3px 0;font-size:.9em;display:flex}.legend-item:last-child{margin-bottom:0}.legend-dot{border-radius:50%;width:12px;height:12px;margin-right:14px;box-shadow:0 2px 4px #0000001a}.chart-container{box-sizing:border-box;background-color:#fff;border-radius:12px;width:100%;height:300px;margin-top:20px;padding:30px;box-shadow:0 2px 8px #00000005}</style><script src="https://cdn.jsdelivr.net/npm/chart.js"></script></head><body> <h1>Criminal History Impact Simulation</h1> <div class="description"> This simulation demonstrates the cumulative impact of different arrest rates and sentencing policies over time. Each dot represents an individual, with size indicating number of arrests and position randomly assigned. </div> <div class="parameters-container"> <div class="parameter-group"> <label for="white_rate">White Arrest Rate:</label> <div class="input-wrapper"> <input type="number" id="white_rate" value="1" min="0" max="100" step="1"> <span>%</span> </div> <div class="tooltip">Probability of arrest per year (0-100%)</div> </div> <div class="parameter-group"> <label for="black_rate">Black Arrest Rate:</label> <div class="input-wrapper"> <input type="number" id="black_rate" value="5" min="0" max="100" step="1"> <span>%</span> </div> <div class="tooltip">Probability of arrest per year (0-100%)</div> </div> <div class="parameter-group"> <label for="avg_first">First Offense Sentence:</label> <div class="input-wrapper"> <input type="number" id="avg_first" value="1" min="0" max="10" step="0.5"> </div> <div class="tooltip">Average sentence in years</div> </div> <div class="parameter-group"> <label for="avg_second">Second Offense Sentence:</label> <div class="input-wrapper"> <input type="number" id="avg_second" value="2" min="0" max="10" step="0.5"> </div> <div class="tooltip">Average sentence in years</div> </div> <div class="parameter-group"> <label for="avg_third">Third+ Offense Sentence:</label> <div class="input-wrapper"> <input type="number" id="avg_third" value="3" min="0" max="10" step="0.5"> </div> <div class="tooltip">Average sentence in years</div> </div> <button id="run_simulation">Run Simulation</button> </div> <div class="main-container"> <div class="visualization-container"> <div class="grid-container"> <div class="grid-section"> <div class="grid-title">White Population</div> <div class="grid" id="white_grid"></div> </div> <div class="legend"> <div class="legend-title">Arrest History</div> <div class="legend-item"> <div class="legend-dot white-dot" style="width:8px;height:8px"></div> <span>1 Arrest</span> </div> <div class="legend-item"> <div class="legend-dot white-dot" style="width:12px;height:12px"></div> <span>2 Arrests</span> </div> <div class="legend-item"> <div class="legend-dot white-dot" style="width:16px;height:16px"></div> <span>3+ Arrests</span> </div> </div> </div> <div class="grid-container"> <div class="grid-section"> <div class="grid-title">Black Population</div> <div class="grid" id="black_grid"></div> </div> <div class="legend"> <div class="legend-title">Arrest History</div> <div class="legend-item"> <div class="black-dot legend-dot" style="width:8px;height:8px"></div> <span>1 Arrest</span> </div> <div class="legend-item"> <div class="black-dot legend-dot" style="width:12px;height:12px"></div> <span>2 Arrests</span> </div> <div class="legend-item"> <div class="black-dot legend-dot" style="width:16px;height:16px"></div> <span>3+ Arrests</span> </div> </div> </div> </div> <div class="chart-container"> <canvas id="chart"></canvas> </div> </div> <script>let e;const t=document.getElementById("white_rate"),n=document.getElementById("black_rate"),r=document.getElementById("avg_first"),o=document.getElementById("avg_second"),a=document.getElementById("avg_third"),l=document.getElementById("run_simulation"),d=document.getElementById("white_grid"),i=document.getElementById("black_grid"),s=document.getElementById("chart").getContext("2d");let c=[],g=[];function u(e,t,n){e.innerHTML="",t.forEach(t=>{if(t.arrests>0){let r=document.createElement("div");r.className=`dot ${n?"white-dot":"black-dot"}`;let o=8+(t.arrests-1)*4;r.style.width=`${o}px`,r.style.height=`${o}px`,r.style.left=`${100*t.x}%`,r.style.top=`${100*t.y}%`,e.appendChild(r)}})}function m(e,t){let n=e.filter(e=>e.sentenceRemaining<=0),l=Math.round(n.length*t);for(let e=0;e<l&&0!==n.length;e++){let e=Math.floor(Math.random()*n.length),t=n[e];t.arrests++;let l=function(e){let t=parseFloat(r.value),n=parseFloat(o.value),l=parseFloat(a.value);return 1===e?t:2===e?n:l}(t.arrests);t.sentenceRemaining=l,n.splice(e,1)}}function p(e){e.forEach(e=>{e.sentenceRemaining>0&&(e.sentenceServed++,e.sentenceRemaining--)})}function b(){var l,b;let h;if(h=!0,[t,n,r,o,a].forEach(e=>{let t=parseFloat(e.value);e.id.includes("rate")?t<0||t>100?(e.style.borderColor="red",h=!1):e.style.borderColor="#ccc":t<0||t>10?(e.style.borderColor="red",h=!1):e.style.borderColor="#ccc"}),!h){alert("Please check input values. Arrest rates must be between 0-100%, sentences between 0-10 years.");return}c=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()})),g=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()}));let y=parseFloat(t.value)/100,f=parseFloat(n.value)/100,v=[],C=[];for(let e=0;e<20;e++){m(c,y),m(g,f),p(c),p(g);let e=c.reduce((e,t)=>e+t.sentenceServed,0),t=g.reduce((e,t)=>e+t.sentenceServed,0);v.push(e),C.push(t),u(d,c,!0),u(i,g,!1)}l=v,b=C,e&&e.destroy(),e=new Chart(s,{type:"line",data:{labels:Array.from({length:20},(e,t)=>`Year ${t+1}`),datasets:[{label:"White Population",data:l,borderColor:"#2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",borderWidth:2,tension:.4},{label:"Black Population",data:b,borderColor:"#F44336",backgroundColor:"rgba(244, 67, 54, 0.1)",borderWidth:2,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{title:{display:!0,text:"Cumulative Years Sentenced Over Time",padding:20,font:{size:16,weight:"bold"}},legend:{position:"top",labels:{padding:20,usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#666",borderColor:"#ddd",borderWidth:1,padding:10,displayColors:!0,callbacks:{label:e=>`${e.dataset.label}: ${e.parsed.y.toFixed(1)} years`}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cumulative Sentence Years",padding:{top:10,bottom:10},font:{weight:"bold"}},grid:{color:"#eee"}},x:{title:{display:!0,text:"Simulation Year",padding:{top:10,bottom:10},font:{weight:"bold"}},grid:{color:"#eee"}}}}})}l.addEventListener("click",b),b();</script> </body></html>