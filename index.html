<!DOCTYPE html>
<html>
<head>
    <title>Criminal History Impact Simulation</title>
    <link rel="stylesheet" href="/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Criminal History Impact Simulation</h1>
    <div class="description">
        This simulation demonstrates the cumulative impact of different arrest rates and sentencing policies over time.
        Each dot represents an individual, with size indicating number of arrests and position randomly assigned.
    </div>
    <div class="parameters-container">
        <div class="parameters-grid">
            <div class="parameter-section">
                <h3>Arrest Rates</h3>
                <div class="parameter-row">
                    <div class="parameter-group">
                        <label for="white_rate">W:</label>
                        <div class="input-wrapper">
                            <input type="number" id="white_rate" value="1" min="0" max="100" step="1">
                            <span>%</span>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <label for="black_rate">B:</label>
                        <div class="input-wrapper">
                            <input type="number" id="black_rate" value="7" min="0" max="100" step="1">
                            <span>%</span>
                        </div>
                    </div>
                </div>
                <div class="tooltip">Probability of arrest per year (0-100%)</div>
            </div>
            <div class="parameter-section">
                <h3>Sentence Lengths</h3>
                <div class="parameter-row">
                    <div class="parameter-group">
                        <label for="avg_first">1st:</label>
                        <div class="input-wrapper">
                            <input type="number" id="avg_first" value="0" min="0" max="10" step="0.5">
                            <span>y</span>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <label for="avg_second">2nd:</label>
                        <div class="input-wrapper">
                            <input type="number" id="avg_second" value="0.5" min="0" max="10" step="0.5">
                            <span>y</span>
                        </div>
                    </div>
                    <div class="parameter-group">
                        <label for="avg_third">3rd+:</label>
                        <div class="input-wrapper">
                            <input type="number" id="avg_third" value="3" min="0" max="10" step="0.5">
                            <span>y</span>
                        </div>
                    </div>
                </div>
                <div class="tooltip">Average sentence in years</div>
            </div>
        </div>
        <button id="run_simulation" class="primary-button">Run Single Simulation</button>
    </div>
    <div class="main-container">
        <div class="visualization-container">
            <div class="grid-container">
                <div class="grid-section">
                    <div class="grid-title">White Population</div>
                    <div class="grid" id="white_grid"></div>
                </div>
                <div class="legend">
                    <div class="legend-title">Arrest History</div>
                    <div class="legend-item">
                        <div class="legend-dot white-dot" style="width: 8px; height: 8px;"></div>
                        <span>1 Arrest</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot white-dot" style="width: 12px; height: 12px;"></div>
                        <span>2 Arrests</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot white-dot" style="width: 16px; height: 16px;"></div>
                        <span>3+ Arrests</span>
                    </div>
                </div>
            </div>
            <div class="grid-container">
                <div class="grid-section">
                    <div class="grid-title">Black Population</div>
                    <div class="grid" id="black_grid"></div>
                </div>
                <div class="legend">
                    <div class="legend-title">Arrest History</div>
                    <div class="legend-item">
                        <div class="legend-dot black-dot" style="width: 8px; height: 8px;"></div>
                        <span>1 Arrest</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot black-dot" style="width: 12px; height: 12px;"></div>
                        <span>2 Arrests</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot black-dot" style="width: 16px; height: 16px;"></div>
                        <span>3+ Arrests</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="chart-container">
            <canvas id="single_sim_chart"></canvas>
        </div>
    </div>
    <div class="section-title">Multiple Simulations Analysis</div>
    <div class="multiple-sims-container">
        <p class="description">
            Run 1000 independent simulations to analyze the average outcomes and variation across simulations.
            Error bars indicate one standard deviation above and below the mean at each time point.
        </p>
        <button id="run_multiple_simulations" class="primary-button">Run Multiple Simulations</button>
        <div class="chart-container">
            <canvas id="multiple_sims_chart"></canvas>
        </div>
    </div>
    <script src="errorBarPlugin.js"></script>
    <script src="simulation.js"></script>
</body>
</html>
