let e,t;const r=document.getElementById("white_rate"),o=document.getElementById("black_rate"),n=document.getElementById("avg_first"),i=document.getElementById("avg_second"),l=document.getElementById("avg_third"),a=document.getElementById("run_simulation"),s=document.getElementById("white_grid"),d=document.getElementById("black_grid"),c=document.getElementById("single_sim_chart"),u=document.getElementById("multiple_sims_chart"),p=c.getContext("2d"),f=u.getContext("2d");let g=[],m=[];function h(){let e=!0;return[r,o,n,i,l].forEach(t=>{let r=parseFloat(t.value);t.id.includes("rate")?r<0||r>100?(t.style.borderColor="red",e=!1):t.style.borderColor="#ccc":r<0||r>10?(t.style.borderColor="red",e=!1):t.style.borderColor="#ccc"}),e}function y(){g=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()})),m=Array.from({length:100},()=>({arrests:0,sentenceServed:0,sentenceRemaining:0,x:Math.random(),y:Math.random()}))}function v(e,t,r){e.innerHTML="",t.forEach(t=>{if(t.arrests>0){let o=document.createElement("div");o.className=`dot ${r?"white-dot":"black-dot"}`;let n=8+(t.arrests-1)*4;o.style.width=`${n}px`,o.style.height=`${n}px`,o.style.left=`${100*t.x}%`,o.style.top=`${100*t.y}%`,e.appendChild(o)}})}function b(e,t){let r=e.filter(e=>e.sentenceRemaining<=0),o=Math.round(r.length*t);for(let e=0;e<o&&0!==r.length;e++){let e=Math.floor(Math.random()*r.length),t=r[e];t.arrests++;let o=function(e){let t=parseFloat(n.value),r=parseFloat(i.value),o=parseFloat(l.value);return 1===e?t:2===e?r:o}(t.arrests);t.sentenceRemaining=o,r.splice(e,1)}}function B(e){e.forEach(e=>{e.sentenceRemaining>0&&(e.sentenceServed++,e.sentenceRemaining--)})}function C(e){return{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{title:{display:!0,text:e,padding:{top:10,bottom:30},font:{size:18,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"},legend:{position:"top",align:"center",labels:{padding:25,usePointStyle:!0,pointStyle:"circle",font:{size:13,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"}},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#2c3e50",titleFont:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},bodyColor:"#34495e",bodyFont:{size:13,family:"'Arial', 'Helvetica Neue', sans-serif"},borderColor:"rgba(0,0,0,0.1)",borderWidth:1,padding:12,cornerRadius:6,displayColors:!0,boxWidth:8,boxHeight:8,callbacks:{label:e=>{let t=e.dataset,r=e.parsed.y,o=`${t.label}: ${r.toFixed(1)} years`;if(t.errorBars&&t.errorBars.plus){let r=t.errorBars.plus[e.dataIndex];r>0&&(o+=` \xb1${r.toFixed(1)}`)}return o}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Cumulative Sentence Years",padding:{top:15,bottom:15},font:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"},ticks:{font:{size:12,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#34495e",padding:8},grid:{color:"rgba(0,0,0,0.05)",drawBorder:!1}},x:{title:{display:!0,text:"Simulation Year",padding:{top:15,bottom:15},font:{size:14,weight:"600",family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#2c3e50"},ticks:{font:{size:12,family:"'Arial', 'Helvetica Neue', sans-serif"},color:"#34495e",padding:8},grid:{color:"rgba(0,0,0,0.05)",drawBorder:!1}}}}}function x(){var t,n;if(!h()){alert("Please check input values. Arrest rates must be between 0-100%, sentences between 0-10 years.");return}y();let i=parseFloat(r.value)/100,l=parseFloat(o.value)/100,a=[],c=[];for(let e=0;e<20;e++){b(g,i),b(m,l),B(g),B(m);let e=g.reduce((e,t)=>e+t.sentenceServed,0),t=m.reduce((e,t)=>e+t.sentenceServed,0);a.push(e),c.push(t),v(s,g,!0),v(d,m,!1)}t=a,n=c,e&&e.destroy(),e=new Chart(p,{type:"line",data:{labels:Array.from({length:20},(e,t)=>`Year ${t+1}`),datasets:[{label:"White Population",data:t,borderColor:"#1976D2",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#1976D2",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#1976D2",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1},{label:"Black Population",data:n,borderColor:"#D32F2F",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#D32F2F",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#D32F2F",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1}]},options:C("Single Simulation Results")})}function H(e){let t=e[0].length,r=Array(t).fill(0),o=Array(t).fill(0);for(let o=0;o<t;o++)r[o]=e.reduce((e,t)=>e+t[o],0)/e.length;for(let n=0;n<t;n++){let t=e.map(e=>Math.pow(e[n]-r[n],2)).reduce((e,t)=>e+t,0)/e.length;o[n]=Math.sqrt(t)}return{means:r,stdDevs:o}}Chart.register({id:"ratioText",beforeDraw:(e,t,r)=>{let{ctx:o,chartArea:{left:n,top:i,right:l,bottom:a}}=e;if(!r.text)return;o.save(),o.font='16px Arial, "Helvetica Neue", sans-serif',o.fillStyle="#2c3e50",o.textAlign="left",o.textBaseline="top";let s=n+(l-n)*.05,d=i+(a-i)*.05,c=r.text.split("\n"),u=Math.max(...c.map(e=>o.measureText(e).width));o.fillStyle="rgba(255, 255, 255, 0.9)",o.fillRect(s-20,d-20,u+40,28*c.length+40),o.fillStyle="#2c3e50",c.forEach((e,t)=>{o.fillText(e,s,d+28*t)}),o.restore()}}),a.addEventListener("click",()=>{x(),v(s,g,!0),v(d,m,!1)}),document.getElementById("run_multiple_simulations").addEventListener("click",()=>{!function(){if(!h()){alert("Please check input values. Arrest rates must be between 0-100%, sentences between 0-10 years.");return}let e=[],n=[];for(let t=0;t<1e3;t++){y();let t=parseFloat(r.value)/100,i=parseFloat(o.value)/100,l=[],a=[];for(let e=0;e<20;e++){b(g,t),b(m,i),B(g),B(m);let e=g.reduce((e,t)=>e+t.sentenceServed,0),r=m.reduce((e,t)=>e+t.sentenceServed,0);l.push(e),a.push(r)}e.push(l),n.push(a)}(function(e,r){t&&t.destroy();let o=Array.from({length:20},(e,t)=>`Year ${t+1}`),n=r.means[19]/e.means[19],i=`For every year a white person spends incarcerated
for criminal conduct, a black person engaging in
the same conduct spends ${n.toFixed(1)} years
incarcerated.`;t=new Chart(f,{type:"line",data:{labels:o,datasets:[{label:"White Population",data:e.means,borderColor:"#1976D2",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#1976D2",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBackgroundColor:"#1976D2",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1,errorBars:{plus:e.stdDevs,minus:e.stdDevs,color:"rgba(25, 118, 210, 0.3)"}},{label:"Black Population",data:r.means,borderColor:"#D32F2F",borderWidth:2.5,tension:.3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:"#D32F2F",pointBorderColor:"#fff",pointHoverBackgroundColor:"#D32F2F",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2,fill:!1,errorBars:{plus:r.stdDevs,minus:r.stdDevs,color:"rgba(211, 47, 47, 0.3)"}}]},options:{...C("Multiple Simulations Results (with Standard Deviation)"),plugins:{...C("").plugins,ratioText:{text:i}}}})})(H(e),H(n))}()}),x();
//# sourceMappingURL=index.21f70b48.js.map
